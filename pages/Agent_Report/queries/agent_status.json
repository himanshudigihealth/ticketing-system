{
  "pluginType": "DB",
  "pluginId": "postgres-plugin",
  "unpublishedAction": {
    "name": "agent_status",
    "datasource": {
      "name": "ticket-system-rds",
      "pluginId": "postgres-plugin",
      "messages": [],
      "isAutoGenerated": false,
      "id": "ticket-system-rds",
      "deleted": false,
      "policies": [],
      "userPermissions": []
    },
    "pageId": "Agent_Report",
    "actionConfiguration": {
      "timeoutInMillisecond": 10000,
      "paginationType": "NONE",
      "encodeParamsToggle": true,
      "body": "SELECT \nag.agent_status,\nag.agent_id,\nag.agent_name,\nag.area_zone,\ntk.count AS number_of_tickets,\nTK.WORK_MINUTES,\ntk.closed_time AS LAST_CLOSED_TIME,\nSUBSTR(cast(sum(wrk.working_hours) as text),0,9) AS WORKING_HOURS\n\nFROM agent ag\nLEFT JOIN (SELECT COUNT(case when ticket_status = 'PICKED' then AGENT_ID  END) AS COUNT, AGENT_ID,\t\t\t\t\t \n\t\t\t\t\t CAST(\nEXTRACT( EPOCH FROM (now()+'5 hours'::interval + '30 minutes'::interval)-MIN(case when ticket_status = 'PICKED' then picked_time END))/60  AS DECIMAL(18,2)) AS WORK_MINUTES,max(closed_time) as closed_time\n\t\t\t\t\t FROM TICKET WHERE  created_time >= current_date GROUP BY AGENT_ID) AS TK ON TK.AGENT_ID=AG.AGENT_ID\nLEFT JOIN \n(select agent_id,cast(inactive_time as timestamp)-cast(active_time as timestamp) as working_hours\nfrom agent_shift_history where cast(created_time as date)=cast(now() as date)) as wrk ON\nwrk.agent_id=AG.agent_id\n--where agent_status!='INACTIVE'\nWHERE AG.agent_projects IN ('SUPPORT','WHATSAPP') and AG.deleted=false\ngroup by wrk.agent_id,ag.agent_id,tk.agent_id,tk.count,tk.work_minutes,tk.closed_time\norder by agent_status asc,tk.count DESC NULLS LAST",
      "selfReferencingDataPaths": []
    },
    "executeOnLoad": true,
    "dynamicBindingPathList": [],
    "isValid": true,
    "invalids": [],
    "messages": [],
    "jsonPathKeys": [],
    "userSetOnLoad": false,
    "confirmBeforeExecute": false,
    "policies": [],
    "userPermissions": []
  },
  "id": "Agent_Report_agent_status",
  "deleted": false,
  "gitSyncId": "620e33872919fc0bd80f5165_620e49402919fc0bd80f5174"
}