{
  "pluginType": "DB",
  "pluginId": "postgres-plugin",
  "unpublishedAction": {
    "name": "ticket_status",
    "datasource": {
      "name": "ticket-system-rds",
      "pluginId": "postgres-plugin",
      "messages": [],
      "isAutoGenerated": false,
      "id": "ticket-system-rds",
      "deleted": false,
      "policies": [],
      "userPermissions": []
    },
    "pageId": "View_open_tickets",
    "actionConfiguration": {
      "timeoutInMillisecond": 100000,
      "paginationType": "NONE",
      "encodeParamsToggle": true,
      "body": "SELECT \nticket_id,\nticket_status,\npriority,\nretailer_id,\nnew_code,\nissue_type,\nissues,\nagent_name,\nr.area_zone,\nTO_CHAR(created_time,'yyyy-mm-dd HH24:MI:SS') as created_time,\nTO_CHAR(assigned_time ,'yyyy-mm-dd HH24:MI:SS') as assigned_time,\nTO_CHAR(picked_time ,'yyyy-mm-dd HH24:MI:SS') as picked_time,\nTO_CHAR(closed_time ,'yyyy-mm-dd HH24:MI:SS') as closed_time,\nCAST(\n\tcase when ticket_status='ASSIGNED'\n\t\tTHEN EXTRACT(EPOCH FROM ((now()+'5 hours'::interval + '30 minutes'::interval)-assigned_time))/60 \n\tWHEN ticket_status='PICKED' \n\tTHEN EXTRACT( EPOCH FROM ((now()+'5 hours'::interval + '30 minutes'::interval)-picked_time))/60\n\t\t WHEN ticket_status='OPEN' \nTHEN EXTRACT( EPOCH FROM ((now()+'5 hours'::interval + '30 minutes'::interval)-created_time))/60\n\t\t END\n\tAS DECIMAL(18,2)) as Time_spend,\t\nticket.agent_id,\nticket.created_by,\nticket.reassigned_by,\nticket.picked_by,\ncase when r.status= 'INACTIVE' or r.stop_date <= current_date then true else false end as status_check,\nr.service_status,\nproject,\nr.retailer_email\nFROM ticket \nleft join agent ag on ag.agent_id=ticket.agent_id\njoin retailer r on r.retailer_code = ticket.retailer_id\nwhere ticket_status not in ('CLOSED','PENDING')\nand  ticket.created_time>=current_date\nand project not in ('MIGRATION')\nand \n(case when (select 1 from agent where agent_email={{appsmith.user.email}} and agent_projects in ('WHATSAPP','SUPPORT') and (agent_level ilike $$%L3%$$ or agent_level ilike $$%WT%$$  or agent_level ilike $$%Z-HEAD%$$))=1 then 1=1 when (select 'ERP' from agent where agent_email={{appsmith.user.email}} and agent_projects in ('SUPPORT') AND agent_level not ilike $$%L3%$$ )='ERP' THEN project='ERP' else project not in ('MIGRATION','ERP') end)\norder by time_spend desc;",
      "selfReferencingDataPaths": [],
      "pluginSpecifiedTemplates": [
        {
          "value": true
        }
      ]
    },
    "executeOnLoad": true,
    "dynamicBindingPathList": [
      {
        "key": "body"
      }
    ],
    "isValid": true,
    "invalids": [
      "'Query timeout' field must be an integer between 0 and 60000"
    ],
    "messages": [],
    "jsonPathKeys": [
      "appsmith.user.email"
    ],
    "userSetOnLoad": true,
    "confirmBeforeExecute": false,
    "policies": [],
    "userPermissions": []
  },
  "id": "View_open_tickets_ticket_status",
  "deleted": false,
  "gitSyncId": "620e33872919fc0bd80f5165_62149752c548441bd09140da"
}